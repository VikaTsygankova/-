# README — YandexWeatherClient

Небольшая одностраничная Java-программа `YandexWeatherClient.java`, выполняющая запрос к Yandex Weather API и извлекающая из ответа погодные данные.

## Что внутри

- HTTP-клиент (`java.net.http.HttpClient`) для выполнения GET-запроса к:
  `https://api.weather.yandex.ru/v2/forecast?lat=<lat>&lon=<lon>&limit=<limit>`.
- Заголовок `X-Yandex-Weather-Key` — обязательный для авторизации запросов к API.
- Полная печать тела ответа (JSON) в консоль.
- Встроенный минималистичный JSON-парсер (в одном файле), не требует внешних библиотек — парсит объекты, массивы, строки, числа, `true/false/null`.
- Логика извлечения значений:
  - текущая температура: `fact.temp`;
  - среднее арифметическое по первым `limit` элементам `forecasts[*].parts.day.temp_avg`.
- Утилиты для безопасного приведения типов и форматированного вывода.

## Требования

- Java 11+ (поддерживается и Java 25). Программа не требует Nashorn или сторонних JSON-библиотек.
- Доступ в интернет для обращения к `api.weather.yandex.ru`.
- API-ключ Yandex Weather.

## Как работает (кратко)

1. Формируется URL с параметрами `lat`, `lon`, `limit`.
2. Выполняется HTTP GET с заголовком `X-Yandex-Weather-Key`.
3. В консоль выводится HTTP статус и полный JSON-ответ (как есть).
4. JSON распарсивается встроенным парсером в структуры `Map`/`List`.
5. Извлекается и печатается `fact.temp` (если присутствует).
6. Берутся первые `limit` элементов массива `forecasts`, в каждом — `parts.day.temp_avg` (если присутствует); выводятся по дням и считается их среднее.

## Как запустить

1. Сохраните код в файл `YandexWeatherClient.java`.
2. Скомпилируйте:
   ```bash
   javac YandexWeatherClient.java
   ```
3. Запустите:
   ```bash
   java YandexWeatherClient 
   ```


## Вывод программы

- HTTP статус ответа.
- Полный JSON-ответ (в сыром виде).
- Текущая температура: `fact.temp` (в формате `xx.xx°C`).
- Значения `parts.day.temp_avg` для первых `limit` дней (если найдены) и их среднее арифметическое.

## Ограничения и замечания

- Встроенный JSON-парсер покрывает стандартные типы JSON и предназначен для функциональной надёжности, но не оптимизирован для высокопроизводительной обработки гигантских тел.
- Если структура ответа не содержит `parts.day.temp_avg` или `fact.temp`, программа аккуратно сообщает об отсутствии данных.
- Для более продвинутого использования (логирования, повторные запросы, таймауты, сериализация) рекомендуются внешние библиотеки (Jackson/Gson/SLF4J) и добавление обработки ошибок/повторных попыток.

## Возможные улучшения

- Заменить встроенный парсер на Jackson/Gson для лучшей производительности и удобства.
- Добавить поддержку прокси, таймаутов, и повторных попыток при сетевых ошибках.
- Выводить JSON в "pretty"-формате для удобочитаемости.
- Добавить unit-тесты для парсера и логики вычисления среднего.


